
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="CiferrC">
      
      
        <link rel="canonical" href="https://rcuchiha.github.io/DC-Antiperrys/karaokes/templater-0x/">
      
      
        <link rel="prev" href="../templaters-fx/">
      
      
        <link rel="next" href="../lib-color-0x/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.5">
    
    
      
        <title>Templater de The0x - DC Antiperrys</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#creador-de-templates-de-the0x539" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="DC Antiperrys" class="md-header__button md-logo" aria-label="DC Antiperrys" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DC Antiperrys
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Templater de The0x
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/RcUchiha/DC-Antiperrys" title="Ir al repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    CiferrC/DC-Antiperrys
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Pestañas" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Introducción

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../terminologia/" class="md-tabs__link">
        
  
    
  
  Terminología

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../traduccion/traduccion/" class="md-tabs__link">
          
  
  Fansubeo

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../programacion/mas-sobre-lua/" class="md-tabs__link">
          
  
  Programación

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="DC Antiperrys" class="md-nav__button md-logo" aria-label="DC Antiperrys" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DC Antiperrys
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/RcUchiha/DC-Antiperrys" title="Ir al repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    CiferrC/DC-Antiperrys
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introducción
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../terminologia/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Terminología
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Fansubeo
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Fansubeo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../traduccion/traduccion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Traducción
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../correccion/correccion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Corrección
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sincronizacion/sincronizacion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sincronización
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../edicion/edicion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Edición
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" checked>
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Karaokes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Karaokes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../templaters-fx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templaters de karaoke
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Templater de The0x
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lib-color-0x/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Colorlib de The0x
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../funcion-autotags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Función AutoTags
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../encode/encode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Encode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../qc/qc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    QC
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Programación
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Programación
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    LUA
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            LUA
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../programacion/mas-sobre-lua/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Más sobre Lua
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../programacion/assf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ASSFoundation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="creador-de-templates-de-the0x539">Creador de templates de The0x539</h1>
<p>Hola, soy el creador de templates de The0x539. Realmente no tengo un nombre en sí, por lo que The0x539 escribió mis documentos en primera persona como una solución muy extraña. No aparece mucho, así que espero que no distraiga demasiado.</p>
<p>Si ya tienes experiencia con un creador de templates, muchos aspectos de mi funcionamiento pueden resultarte bastante familiares. Sin embargo, hay algunas diferencias clave en el uso básico que pueden causar confusión al cambiarte.
En particular, aunque comparto muchas características con otros creadores de templates, no soy compatible con templates escritos para ellos, o viceversa, aparte de casos incidentales sencillos.
En realidad, esto no es nada nuevo: los otros dos principales creadores de templates ya no son compatibles entre sí, pero parece que merece la pena dejar clara y explícita esta incompatibilidad. Cuando se escribe una template, hay que elegir a qué creador de templates dirigirse. Esto ya era así antes de que yo llegara.</p>
<h1 id="templates">Templates</h1>
<p>Cualquier template razonable consistirá en dos cosas, que estos documentos llamarán <em>components</em> e <em>input</em>.
A continuación se describirán en profundidad cada uno de ellos, pero brevemente, para aquellos que estén algo familiarizados con la creación de templates, un <em>component</em> es una línea de subtítulo marcada con <code>code</code>/<code>template</code>/<code>mixin</code> (más sobre esto último más adelante) en su campo de efecto, y una línea <em>input</em> es una marcada con <code>kara</code>.
Con algunas excepciones (principalmente <code>code once</code>), la idea detrás de ejecutar una template es, para cada línea de entrada, "ejecutar" cada componente contra esa línea (o contra cada char/etc dentro de ella).</p>
<h2 id="input">Input</h2>
<p>Input is probably the simpler of the two parts of a template. Simply put, for a typical template, an input line consists of one line of lyrics for a song.
The lyrics may include k-timing tags, for use with <code>syl</code>-class components, as well as the standard karaskel hyphen-prefixed inline-fx tags. Details on k-timing are beyond the scope of this document.</p>
<p>Importantly, a line of input <em>must</em> have its effect field set to <code>kara</code> (or <code>karaoke</code>).
<strong>Unlike other templaters, I do not treat a line as input unless it is already explicitly marked as such.</strong>
This is not only a deliberate design decision, but also (arguably) necessary due to my more advanced conditional execution logic.</p>
<p>Input lines' actor fields are very useful for conditional execution purposes.
On a basic level, different actor values can be used to denote different parts of a song, applying a different set of components to each.
Getting more advanced, a template could be written to have a common <code>template</code> component apply to all the input, but select different <code>mixin</code>s based on parts of the song, perhaps to differ in color but share all other attributes.
In its most powerful form, an input line's actor field can be used as a collection of modifiers to mix and match different components on a per-line basis.
More on this later.</p>
<h2 id="components">Components</h2>
<p>Components are the <em>fun</em> part of making a template. Components come in three varieties: <code>code</code>, <code>template</code>, and <code>mixin</code>.
My <code>code</code> and <code>template</code> components are, at a basic level, very similar to those of other templaters, and <code>mixin</code> components are like a more powerful form of karaOK's <code>template lsyl</code> family of components.</p>
<p>A component is defined by its effect field, which acts as a space-separated list of tokens.
The first token must be <code>code</code>, <code>template</code>, or <code>mixin</code>, depending on which kind of component it is.
The second token is the component's <em>class</em>, which is one of the following:</p>
<table>
<thead>
<tr>
<th><strong>Class</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>once</code></td>
<td>Runs once at the beginning of template evaluation. Only valid for <code>code</code> components. (<code>template once</code> TBD)</td>
</tr>
<tr>
<td><code>line</code></td>
<td>Runs once for each line of input.</td>
</tr>
<tr>
<td><code>syl</code></td>
<td>Runs once for each k-timed <code>syl</code> within each line of input. Lines with no k-timing information will be treated as one big syl.</td>
</tr>
<tr>
<td><code>word</code></td>
<td>Like <code>syl</code>, but separated by whitespace instead of k-timing tags.</td>
</tr>
<tr>
<td><code>char</code></td>
<td>Runs once for each character (currently uses <code>unicode.chars</code>) within each line of input.</td>
</tr>
</tbody>
</table>
<p>Further tokens within a component's effect field, if present, are <em>modifiers</em>. More on those later.</p>
<h3 id="code-components"><code>code</code> Components</h3>
<p>A <code>code</code> component is simple: running it executes its text as a block of Lua code.
Their most common use is <code>code once</code> components that import utility libraries, define helper functions, or set up global constants for use elsewhere in the template.
However, the other classes do occasionally prove useful, executing the code on, <em>e.g.</em>, a per-line basis.</p>
<h3 id="template-components"><code>template</code> Components</h3>
<p>As their name might imply, <code>template</code> components are central to writing a template, as with my predecessors.
It is their sole responsibility to generate new lines of <em>output</em>. If there are no <code>template</code> components, no lines will be generated.
Generally speaking, running a <code>template</code> component entails evaluating any inline variables or inline expressions in its text, then generating a line of output consisting of the evaluated template text and the piece of text that the component's running against.
For example, consider the following simple template and the output it produces based on the given input:</p>
<pre><code>template line: {\placeholder}
template syl: {\foo}
kara: {\k86}Word{\k41}less{\k24}ly {\k87}watch{\k33}ing {\k63}he {\k66}waits{\k25} {\k44}by {\k22}the {\k57}win{\k69}dow
kara: {\k36}And {\k38}won{\k59}ders{\k43} {\k25}at {\k16}the {\k40}emp{\k21}ty {\k49}place {\k26}in{\k85}side
fx: {\placeholder}Wordlessly watching he waits by the window
fx: {\foo}Word
fx: {\foo}less
fx: {\foo}ly
fx: {\foo}watch
fx: {\foo}ing
fx: {\foo}he
fx: {\foo}waits
fx: {\foo}
fx: {\foo}by
fx: {\foo}the
fx: {\foo}win
fx: {\foo}dow
fx: {\placeholder}And wonders at the empty place inside
fx: {\foo}And
fx: {\foo}won
fx: {\foo}ders
fx: {\foo}
fx: {\foo}at
fx: {\foo}the
fx: {\foo}emp
fx: {\foo}ty
fx: {\foo}place
fx: {\foo}in
fx: {\foo}side
</code></pre>
<p>Already this is useful for simple song styles, since you can now apply a set of tags to a set of lines, perhaps even with multiple layers, while not having to manually keep everything consistent.
Add some inline expressions to generate more complicated tags to each line and things start to get interesting.</p>
<h3 id="mixin-components"><code>mixin</code> Components</h3>
<p>Mixins, as a first-class component variety, are my defining feature. They modify the output produced by <code>template</code> components, generally adding tags. If <code>template lsyl</code> from karaOK is unfamiliar to you, consider the following basic demonstration:</p>
<pre><code>template line: {\Tpl}
mixin line: {\line}
mixin syl: {\syl}
mixin char: {\char}
kara: {\k86}Word{\k41}less{\k24}ly {\k87}watch{\k33}ing {\k63}he {\k66}waits{\k25} {\k44}by {\k22}the {\k57}win{\k69}dow
kara: {\k36}And {\k38}won{\k59}ders{\k43} {\k25}at {\k16}the {\k40}emp{\k21}ty {\k49}place {\k26}in{\k85}side
fx: {\Tpl\line\syl\char}W{\char}o{\char}r{\char}d{\syl\char}l{\char}e{\char}s{\char}s{\syl\char}l{\char}y{\char} {\syl\char}w{\char}a{\char}t{\char}c{\char}h{\syl\char}i{\char}n{\char}g{\char} {\syl\char}h{\char}e{\char} {\syl\char}w{\char}a{\char}i{\char}t{\char}s{\syl\char} {\syl\char}b{\char}y{\char} {\syl\char}t{\char}h{\char}e{\char} {\syl\char}w{\char}i{\char}n{\syl\char}d{\char}o{\char}w
fx: {\Tpl\line\syl\char}A{\char}n{\char}d{\char} {\syl\char}w{\char}o{\char}n{\syl\char}d{\char}e{\char}r{\char}s{\syl\char} {\syl\char}a{\char}t{\char} {\syl\char}t{\char}h{\char}e{\char} {\syl\char}e{\char}m{\char}p{\syl\char}t{\char}y{\char} {\syl\char}p{\char}l{\char}a{\char}c{\char}e{\char} {\syl\char}i{\char}n{\syl\char}s{\char}i{\char}d{\char}e
</code></pre>
<p>Any number of <code>mixin</code> components can "apply to" any number of <code>template</code> components using my powerful conditional execution abilities, offering much more expressive templating than the "name association" system my predecessors offer.</p>
<p>Mixins can be very useful for relying more heavily on <code>template line</code> than is strictly necessary, resulting in cleaner output that's also easier to make sense of.
For instance, combining <code>template line</code> with <code>mixin syl</code> allows for simple (read: doesn't involve movement or horizontal scaling) in-line highlight effects, and <code>mixin char</code> can be useful for by-character gradients.</p>
<p><code>mixin line</code> is an interesting construct. It goes once at the start of each generated line, like the text of the template it's modifying, but as a mixin, it works as a modifier. Even if the template's class is <code>syl</code>, <code>word</code>, or <code>char</code>, it's appropriate to use <code>mixin line</code> to modify the entire line <em>of output</em>.
Combined with conditional execution, this behavior becomes quite useful:
- If a song style is largely uniform, but uses different colors for different groups of lines (perhaps color-coded by character), then the common tags could be put in a <code>template</code> that applies to the entire song, and there would be a <code>mixin</code> for each color, with each one set to execute when appropriate (likely using the <code>actor</code> modifier). This could also have been achieved using a sort of lookup table, but it makes for a decent example, and this approach actually scales better when space-separated actors get involved.
- If a style has some complicated stuff going on, but there is, for instance, a variety of templates meant to generate a consistent "glow" effect, then a mixin can be used to apply the same tags to all "glow" output without adding them to each template.</p>
<h3 id="modifiers">Modifiers</h3>
<p>In addition to its variety and class, a component's effect field may contain any amount of <em>modifiers</em>, which alter its behavior.
Most modifiers allow you to specify the conditions under which a component will execute based on the input or whatever else.</p>
<p>If there are multiple different restrictions on a component, then all restrictions must be satisfied for the component to execute.
For example, a mixin with the modifiers <code>actor foo actor bar layer 3 layer 5</code> will execute only for lines where ((actor contains <code>foo</code> OR actor contains <code>bar</code>) AND (layer is 3 or layer is 5)).</p>
<h4 id="style"><code>style</code></h4>
<p>By default, a component is "interested" in only the style that it is itself set to. This means that it will only execute for input with a matching style.
Adding <code>style foo</code> to a template will add <code>foo</code> to its set of interested styles, so it will also execute for input with the <code>foo</code> style.
Styles with names containing spaces do not currently work with this modifier.</p>
<h4 id="anystyle"><code>anystyle</code></h4>
<p>Similar to the <code>all</code> modifier in other templaters, this makes the component interested in any style.</p>
<h4 id="actor"><code>actor</code></h4>
<p>Similar to the <code>style</code> modifier, each component has a set of actor values it is "interested" in.
By default, this set is empty and a component won't look at the input's actor field.
Adding one or more <code>actor</code> modifiers will restrict the component to only execute for input with matching actor values.</p>
<p><strong>Advanced usage:</strong> The actor field of a line of input is treated not as a single string, but as a space-separated list of actors, so input can be given multiple "actor values" that the component tries to match.
If there is any intersection between the component's set of interested actors and the input's set of actor values, the component will execute.</p>
<h4 id="noactor"><code>noactor</code></h4>
<p>Works basically the same way as <code>actor</code>, but adds to a list of <em>"disinterested"</em> actor values for which the component will <em>not</em> execute.
Can sort of be said to take "precedence" over <code>actor</code>, but that doesn't accurately reflect how these modifiers are implemented.</p>
<h4 id="t_actor"><code>t_actor</code></h4>
<p>Only valid for <code>mixin</code>s.
Very similar to <code>actor</code>, but checks the base template the mixin is running on, not the input.
For instance, if one has a <code>template</code> that generates triangular particle effects, one could put <code>tri</code> in its actor field and then use <code>t_actor tri</code> to make mixins that only apply to the particles.</p>
<h4 id="no_t_actor"><code>no_t_actor</code></h4>
<p>Given the previous three modifiers, this should be self-explanatory.</p>
<h4 id="sylfx-and-inlinefx"><code>sylfx</code> and <code>inlinefx</code></h4>
<p>Only valid for <code>syl</code> and <code>char</code> components.
Another "interested values" system, this time for checking the value of the current syllable's <code>syl_fx</code>/<code>inline_fx</code> field.
Useful for expressing conditional execution that changes on a per-syl basis.</p>
<h4 id="layer"><code>layer</code></h4>
<p>Only valid for <code>mixin</code>s.</p>
<p>Again, similar to <code>style</code> or <code>actor</code>.
By default, a mixin is "interested" in all layers.
This modifier restricts a mixin to only execute for certain layer numbers.</p>
<p>When checking the layer number, I look at <em>the output's current layer number</em>.
Output lines start with a layer number copied from the <code>template</code> that generated them, but the number may be changed by functions such as <code>relayer</code>.
If the layer is changed, I will "see" the updated layer number, not the original.</p>
<h4 id="if-and-unless"><code>if</code> and <code>unless</code></h4>
<p>Easily the most powerful conditional execution modifier.
Given an <code>if foo</code> modifier, I will look in the Lua environment for a value named <code>foo</code>.
When checking whether to execute, I will expect this value to be either a boolean or a function.
If it is a function, I will call it (with no arguments) and look at the result.
Either way, I then use this value as a predicate to decide whether the component should execute.</p>
<p>For <code>if</code>, the component will only execute if the value is <code>true</code>.
For <code>unless</code>, the component will only execute if the value is <code>false</code>.</p>
<p>At the moment, only one instance of the <code>if</code>/<code>unless</code> modifier is allowed per component.</p>
<p><code>cond</code> is an alias for <code>if</code>.</p>
<h4 id="noblank"><code>noblank</code></h4>
<p>Primarily useful for <code>syl</code> and <code>char</code> components.
Similar to the <code>noblank</code> modifier in other templaters, but also works for mixins.
This is useful for, say, preventing a <code>mixin char</code> component from pointlessly executing for spaces.</p>
<p>Components with the <code>noblank</code> modifier will not execute for input whose text is empty or consists entirely of whitespace.
Unlike other templaters, this will <em>not</em> filter out syls with zero duration. For that, see <code>nok0</code>.</p>
<h4 id="nok0"><code>nok0</code></h4>
<p>Only valid for <code>syl</code> and <code>char</code> components.</p>
<p>Components with this modifier will not execute for syls with zero duration, or chars belonging to such a syl.</p>
<h4 id="keepspace"><code>keepspace</code></h4>
<p>Only valid for <code>template</code>s. Primarily useful for <code>syl</code> and <code>word</code>.
By default, just before inserting a line of output into the file, I will trim away any trailing whitespace.
The <code>keepspace</code> modifier will disable this behavior for an individual template, should this be desirable for any reason.</p>
<h4 id="nomerge"><code>nomerge</code></h4>
<p>Only valid for <code>template</code>s.
By default, just before removing trailing whitespace, I will merge consecutive tag blocks from output lines.
This is done using the primitive technique of naively removing <code>}{</code> from the output, so if this breaks anything fancy, the <code>nomerge</code> modifier can disable this behavior.</p>
<h4 id="notext"><code>notext</code></h4>
<p>Only valid for <code>template</code>s.
Equivalent to the <code>notext</code> modifier from other templaters.
By default, the last step of generating a line (i.e. after running all <code>mixins</code>) is to append the corresponding text from the source line. The <code>notext</code> modifier disables this behavior.</p>
<p>Useful when, say, generating particle effects with drawings.</p>
<h4 id="loop"><code>loop</code></h4>
<p>Other templaters support giving a component a <code>loop n</code> modifier, where <code>n</code> is some integer.
The component will then execute <em>n</em> times, and the current/maximum loop values can be accessed using <code>j</code> and <code>maxj</code>, available as both Lua variables and inline variables.
Loops follow the convention set by Lua, starting at 1 and including the maximum.</p>
<p>My implementation of this feature is similar, but I require specifying a name in the modifier, e.g., <code>loop foo 3</code>.
The loop count is then accessed using <code>$loop_foo</code> or, in Lua, <code>loopctx.state.foo</code>, and the maximum with <code>$maxloop_foo</code> or <code>loopctx.max.foo</code>.
This allows for multiple independent named loops on a single component.
Having multiple loops can be very powerful for anything that requires more than one "dimension" of repetition, like combining some frame-by-frame effect with a vertical gradient.</p>
<p>If there are multiple loops, they will be nested in <em>reverse</em> order of appearance.
As a demonstration of this, consider the following example:</p>
<pre><code>template line loop foo 2 loop bar 3: {\foo$loop_foo\bar$loop_bar}
kara: {\k86}Word{\k41}less{\k24}ly {\k87}watch{\k33}ing {\k63}he {\k66}waits{\k25} {\k44}by {\k22}the {\k57}win{\k69}dow
kara: {\k36}And {\k38}won{\k59}ders{\k43} {\k25}at {\k16}the {\k40}emp{\k21}ty {\k49}place {\k26}in{\k85}side
fx: {\foo1\bar1}Wordlessly watching he waits by the window
fx: {\foo2\bar1}Wordlessly watching he waits by the window
fx: {\foo1\bar2}Wordlessly watching he waits by the window
fx: {\foo2\bar2}Wordlessly watching he waits by the window
fx: {\foo1\bar3}Wordlessly watching he waits by the window
fx: {\foo2\bar3}Wordlessly watching he waits by the window
fx: {\foo1\bar1}And wonders at the empty place inside
fx: {\foo2\bar1}And wonders at the empty place inside
fx: {\foo1\bar2}And wonders at the empty place inside
fx: {\foo2\bar2}And wonders at the empty place inside
fx: {\foo1\bar3}And wonders at the empty place inside
fx: {\foo2\bar3}And wonders at the empty place inside
</code></pre>
<p>See the <code>incr</code> method in the <code>loopctx</code> class for how this works.
Basically, usage of <code>loop</code> is treated as one big loop, where the iteration step entails treating the loopctx as a little-endian list of digits:
* Increment the first loop variable.
* If this exceeds that loop's maximum value, step forward by resetting it to 1 and incrementing the <em>next</em> loop variable.
* If the next loop variable also overflowed, step forward again in the same fashion. Repeat.
* If the final loop variable has overflowed, the "big loop" is done.</p>
<p><code>repeat</code> is an alias for <code>loop</code>.</p>
<p>Mixins now support loops! Loop variables for mixins are namespaced separately from their template's loop variables.
As inline variables, they are accessed with <code>$mloop_bar</code> and <code>$maxmloop_bar</code>.
In Lua, they are accessed from <code>mloopctx</code> instead of <code>loopctx</code>, and the <code>maxmloop</code> function takes the place of <code>maxloop</code>.</p>
<h4 id="prefix"><code>prefix</code></h4>
<p>Only valid for <code>mixin</code>s.
Mixin output is usually placed just before the text it's associated with.
The <code>prefix</code> modifier instead places it at the beginning of the line, alongside the base <code>template</code> text and any <code>mixin line</code> components.
Consider the following example, where one <code>mixin word</code> component has the <code>prefix</code> modifier and one does not:</p>
<pre><code>template line: {\X}
mixin word prefix: {\Y(!word.text!)}
mixin word: {\Z}
kara: {\k86}Word{\k41}less{\k24}ly {\k87}watch{\k33}ing {\k63}he {\k66}waits{\k25} {\k44}by {\k22}the {\k57}win{\k69}dow
kara: {\k36}And {\k38}won{\k59}ders{\k43} {\k25}at {\k16}the {\k40}emp{\k21}ty {\k49}place {\k26}in{\k85}side
fx: {\X\Y(Wordlessly )\Y(watching )\Y(he )\Y(waits )\Y(by )\Y(the )\Y(window)\Z}Wordlessly {\Z}watching {\Z}he {\Z}waits {\Z}by {\Z}the {\Z}window
fx: {\X\Y(And )\Y(wonders )\Y(at )\Y(the )\Y(empty )\Y(place )\Y(inside)\Z}And {\Z}wonders {\Z}at {\Z}the {\Z}empty {\Z}place {\Z}inside
</code></pre>
<p>This may seem like a fairly strange modifier to offer, but I have it for a fairly specific purpose: using <code>\t(\clip)</code> in a <code>mixin syl prefix</code> component to produce behavior similar to <code>\kf</code>, but with all the flexibility of clips and transforms.</p>
<h1 id="template-execution">Template Execution</h1>
<p>TODO</p>
<h2 id="execution-ordersemantics">Execution Order/Semantics</h2>
<pre><code>for each line of input:
    (try to) run all `code line` components
    (try to) run all `template line` components

    for each word in the line:
        (try to) run all `code word` components
        (try to) run all `template word` components

    do the above for syls and chars
</code></pre>
<p>(mixins happen as part of "running a template")
see the <code>apply_templates</code> function for more details</p>
<p>TODO</p>
<h2 id="inline-expressions">Inline Expressions</h2>
<p>In a template's text, Lua expressions enclosed in a pair of <code>!</code> will be evaluated, with their result placed in the output text, like <code>!word.text!</code> as used in an earlier example.
Unlike other templaters, I will treat <code>nil</code> as an empty string here, which is convenient when writing functions like <code>retime</code> and <code>relayer</code> that are useful for their side effects.</p>
<p>Depending on the component being executed, a few tables such as <code>line</code>, <code>syl</code>, <code>word</code>, and/or <code>char</code> will be in scope, and will be populated with information such as <code>.text_stripped</code>, <code>.duration</code>, or <code>.width</code>.
More information on common fields can be found <a href="https://aegisub.shinon71.moe/Automation/Lua/Modules/karaskel.lua">here</a>.
The stock templater lacks full support for <code>word</code> and <code>char</code> classes, but they are somewhat similar to <code>syl</code>.
"Parent" items can be accessed where it makes sense, such as <code>char.syl</code> or <code>word.line</code>.</p>
<p>I populate these objects with some fields that aren't available in other templaters.
Notably, in a <code>syl</code>, the <code>.syl_fx</code> field is similar to the <code>.inline_fx</code> field, but does not "stick" to subsequent syls within a line.</p>
<p>For example, consider the following line: <code>{\k86}Word{\k41}less{\k24}ly {\k87\-foo}watch{\k33}ing {\k63}he {\k66\-bar}waits{\k25} {\k44}by {\k22\-baz}the {\k57}win{\k69}dow</code>, and how the fields are populated:</p>
<table>
<thead>
<tr>
<th><code>syl.text_stripped</code></th>
<th>Word</th>
<th>less</th>
<th>ly</th>
<th>watch</th>
<th>ing</th>
<th>he</th>
<th>waits</th>
<th></th>
<th>by</th>
<th>the</th>
<th>win</th>
<th>dow</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>syl.inline_fx</code></td>
<td>""</td>
<td>""</td>
<td>""</td>
<td>"foo"</td>
<td>"foo"</td>
<td>"foo"</td>
<td>"bar"</td>
<td>"bar"</td>
<td>"bar"</td>
<td>"baz"</td>
<td>"baz"</td>
<td>"baz"</td>
</tr>
<tr>
<td><code>syl.syl_fx</code></td>
<td>""</td>
<td>""</td>
<td>""</td>
<td>"foo"</td>
<td>""</td>
<td>""</td>
<td>"bar"</td>
<td>""</td>
<td>""</td>
<td>"baz"</td>
<td>""</td>
<td>""</td>
</tr>
</tbody>
</table>
<p>TODO</p>
<h2 id="inline-variables">Inline Variables</h2>
<p>In a template's text, a dollar sign followed by certain names will be expanded to certain values, like <code>$loop_foo</code> as used in an earlier example.
I don't support all the same loop variables as other templaters, and the ones I do support will often have different names.
More loop variables will probably be added in the future, since they're so convenient.
For now, see the <code>eval_inline_var</code> function for what I currently offer.</p>
<p>TODO</p>
<h2 id="available-functions">Available Functions</h2>
<p>If present, the <code>ln.kara</code> and <code>0x.color</code> modules will be loaded automatically and can be accessed as <code>ln</code> and <code>colorlib</code>, respectively.</p>
<p>Modules (code files that contain helper functions, as opposed to macros, which generally call <code>aegisub.register_macro</code> at some point) go in the <code>include</code> directory. In accordance with the standard Lua module system, those two modules must be located at <code>ln/kara.lua</code> and <code>0x/color.lua</code> respectively in order for those paths to resolve. This is completely normal; I'm not doing anything special here. Any auto4 code that loads any module follows these same rules.</p>
<p>Several familiar functions from other templaters, such as <code>retime</code> and <code>maxloop</code>, are available with a few enhancements, and I also offer a few new functions.</p>
<p>See the <code>util</code> and <code>template_env</code> declarations in my source code for my implementations of these functions, and to see what standard library functionality I expose by default.</p>
<h3 id="print"><code>print(...)</code></h3>
<p>A handy debugging function. Works like Lua's standard <code>print</code> function, but backed by <code>aegisub.log</code>.
I also offer <code>printf</code>, which is literally just an alias for <code>aegisub.log</code>.</p>
<h3 id="retimemode-start_offset0-end_offset0"><code>retime(mode, start_offset=0, end_offset=0)</code></h3>
<p>If you have any past templating experience, this function should be familiar.
It's the most convenient way to change an output line's start/end times.</p>
<p>I have a handful of modes that can be pretty useful and aren't necessarily available in other templaters.
In particular, the <code>clamp</code> modes can be used to ensure other retimes don't extend the output's start/end times past the input's.</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th><code>line.start_time = start_offset +</code></th>
<th><code>line.end_time = end_offset +</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>"syl"</code></td>
<td><code>orgline.start_time + syl.start_time</code></td>
<td><code>orgline.start_time + syl.end_time</code></td>
</tr>
<tr>
<td><code>"presyl"</code></td>
<td><code>orgline.start_time + syl.start_time</code></td>
<td><code>orgline.start_time + syl.start_time</code></td>
</tr>
<tr>
<td><code>"postsyl"</code></td>
<td><code>orgline.start_time + syl.end_time</code></td>
<td><code>orgline.start_time + syl.end_time</code></td>
</tr>
<tr>
<td><code>"line"</code></td>
<td><code>orgline.start_time</code></td>
<td><code>orgline.end_time</code></td>
</tr>
<tr>
<td><code>"preline"</code></td>
<td><code>orgline.start_time</code></td>
<td><code>orgline.start_time</code></td>
</tr>
<tr>
<td><code>"postline"</code></td>
<td><code>orgline.end_time</code></td>
<td><code>orgline.end_time</code></td>
</tr>
<tr>
<td><code>"start2syl"</code></td>
<td><code>orgline.start_time</code></td>
<td><code>orgline.start_time + syl.start_time</code></td>
</tr>
<tr>
<td><code>"syl2end"</code></td>
<td><code>orgline.start_time + syl.end_time</code></td>
<td><code>orgline.end_time</code></td>
</tr>
<tr>
<td><code>"presyl2postline"</code></td>
<td><code>orgline.start_time + syl.start_time</code></td>
<td><code>orgline.end_time</code></td>
</tr>
<tr>
<td><code>"preline2postsyl"</code></td>
<td><code>orgline.start_time</code></td>
<td><code>orgline.start_time + syl.end_time</code></td>
</tr>
<tr>
<td><code>"delta"</code></td>
<td><code>line.start_time</code></td>
<td><code>line.end_time</code></td>
</tr>
<tr>
<td><code>"set"</code>, <code>"abs"</code></td>
<td><code>0</code></td>
<td><code>0</code></td>
</tr>
</tbody>
</table>
<p>As a special case, <code>clamp</code> keeps the start and end times unchanged, unless they would fall outside the input line's start/end times (plus offsets, if applicable).
Similarly, <code>clampsyl</code> does the same, but with the original syl's start/end times.</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th><code>line.start_time = max(line.start_time,</code></th>
<th><code>line.end_time = min(line.end_time,</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>"clamp"</code></td>
<td><code>orgline.start_time + start_offset)</code></td>
<td><code>orgline.end_time + end_offset)</code></td>
</tr>
<tr>
<td><code>"clampsyl"</code></td>
<td><code>syl.start_time + start_offset)</code></td>
<td><code>syl.end_time + end_offset)</code></td>
</tr>
</tbody>
</table>
<h3 id="relayernew_layer"><code>relayer(new_layer)</code></h3>
<p><code>line.layer = new_layer</code>. Enough said.</p>
<h3 id="maxloopvar-val-maxmloopvar-val"><code>maxloop(var, val)</code>, <code>maxmloop(var, val)</code></h3>
<p><em>Basically</em> <code>loopctx.max[var] = val</code>.
Usually useful if your loop count isn't hardcoded; perhaps it's based on the width of the syllable.
Note that this function will get called repeatedly if it's in a component that gets called repeatedly, so it's generally advisable to use a <code>val</code> that remains consistent across repeated calls.
<code>maxloop</code> is for <code>template</code> loops, while <code>maxmloop</code> is for <code>mixin</code> loops.</p>
<h3 id="setkey-val"><code>set(key, val)</code></h3>
<p><code>tenv[key] = val</code>. For if you want to assign to a (global) variable in an inline expression, and that's about it.</p>
<h3 id="skip"><code>skip()</code></h3>
<p>If this function is called while generating a line, that specific line of output will be discarded.
(The rest of the template will still be evaluated, resulting in a complete generated line - the only difference is that the line won't be inserted into the document.)</p>
<p>One possible use case for this is to call it in a mixin that has condition modifiers of some sort to express "If these conditions are met, <em>do not</em> generate output", since condition modifiers themselves can only express "execute only if these conditions are met".</p>
<p>This is similar to calling <code>maxloop(0)</code> in karaOK, except not tied to a somewhat orthogonal feature, so one could in theory skip certain iterations of a loop without prematurely ending the entire loop.</p>
<h3 id="unskip"><code>unskip()</code></h3>
<p>Cancels the effect of a previous <code>skip()</code> call, meaning the line will once again be included in the document.</p>
<p>Whichever of the two functions was called most recently takes precedence.</p>
<h3 id="mskip"><code>mskip()</code></h3>
<p>Skips the current iteration of the current mixin.
Works very similarly to <code>skip()</code>, but on the level of an individual mixin's evaluation.</p>
<h3 id="unmskip"><code>unmskip()</code></h3>
<p>Take a wild guess.</p>
<h3 id="utiltag_or_defaulttag-default"><code>util.tag_or_default(tag, default)</code></h3>
<p>logarithm's <code>ln.line.tag</code> is a nice function, but because of how other templaters treat inline expressions that evaluate to <code>nil</code>, it returns an empty string if it finds no tags.
The empty string is truthy in Lua, so this means that <code>ln.line.tag("foo") or "\\foo(bar)"</code> doesn't work the way one might hope.
This function arose from a frustration with having to write code to do that so many times, so I allow you to just do <code>util.tag_or_default("foo", "\\foo(bar)")</code>. Hooray!</p>
<h3 id="utilfadt_in-t_out"><code>util.fad(t_in, t_out)</code></h3>
<p>A specialization of <code>util.tag_or_default</code>, this function will handle formatting the <code>\fad</code> tag for you.</p>
<h3 id="utilxfobjchar-objsorglinechars-fieldcenter"><code>util.xf(obj=char, objs=orgline.chars, field='center')</code></h3>
<p>Most commonly called with no arguments.
Returns the position of the current character, returning 0.0 for the first char in the line and 1.0 for the final char.</p>
<p>Supports the passing of alternative objects and position fields, <em>e.g.</em>, <code>util.xf(syl, orgline.syls, 'right')</code></p>
<p>In the beginning, there was <code>char.ci / #orgline.chars</code>, used by many a gradient-by-character script.
However, index-based calculations are flawed for variable-width fonts, and may produce lopsided gradients depending on the glyphs within the line.
Then there was <code>char.x / orgline.width</code>.
This was better, but whether looking at the left, center, or right, this approach does not reach both extremes.
Finally, there came <code>char.center / (final_char.center - first_char.center)</code>, and it was good.
It became an annoying piece of boilerplate, though, so now I offer this function to just do it.</p>
<p>This function was formerly known as <code>util.cx</code>.
This name now exists as an alias for backwards compatibility.</p>
<h3 id="utillerpt-v0-v1"><code>util.lerp(t, v0, v1)</code></h3>
<p>Straightforward linear interpolation of two numbers: <code>(v1 * t) + (v0 * (1 - t))</code>.</p>
<h3 id="utilgbcc1-c2-interp-tutilxf"><code>util.gbc(c1, c2, interp, t=util.xf())</code></h3>
<p>A somewhat flexible function for gradient-by-character effects.
Typical usage would go in a <code>mixin char</code> component and look something like <code>{\3c!util.gbc('&amp;H0000FF&amp;', '&amp;HFF0000&amp;')!}</code>.
If no <code>interp</code> function is provided, I will try to guess how to interpolate the two values.
At the moment, this means:
* If both values are numbers, use <code>util.lerp</code>.
* If both values are strings and the first value matches the usual format for an alpha tag (i.e., the pattern <code>&amp;H[0-9a-fA-F][0-9a-fA-F]&amp;</code>), use <code>colorlib.interp_alpha</code>.
* Otherwise, if they're both strings, assume they're colors and use <code>colorlib.interp_lch</code>.
* Otherwise, give up.</p>
<p>If this is unsatisfactory, well, that's why I expose this function's third argument: specify your own interpolation function with a signature analagous to <code>util.lerp</code>'s.</p>
<h3 id="utilmulti_gbccs-interp-tutilxf"><code>util.multi_gbc(cs, interp, t=util.xf())</code></h3>
<p>Like <code>util.gbc</code>, but accepts a <em>list</em> of colors, for multi-stop gradients. Nifty.</p>
<h3 id="utilmake_gradv1-v2-dv1-verticaltrue-loopnamegrad-extendtrue"><code>util.make_grad(v1, v2, dv=1, vertical=true, loopname='grad', extend=true)</code></h3>
<p>The first step to creating a clip-based gradient.</p>
<p><code>v1</code> and <code>v2</code> are the min/max values for the span of the gradient.
<code>dv</code> is the "step size": each segment of the gradient will generally be this size.
<code>vertical</code> determines whether the gradient goes from top to bottom or from left to right.
Unless <code>extend</code> is false, the first and last gradient segments will have their clips extended to the edge of the screen.</p>
<p>This function calls <code>maxloop</code> in order to emit multiple lines; <code>loopname</code> can be used to specify an alternate name to use.</p>
<h3 id="utilget_gradc1-c2-interp-loopnamegrad-offset0"><code>util.get_grad(c1, c2, interp, loopname='grad', offset=0)</code></h3>
<p>The second step to creating a clip-based gradient.
This works in largely the same way as <code>util.gbc</code>,
except that it determines the interpolation <code>t</code> value using the template loop status.</p>
<p><code>offset</code> will be added to the loop state value when calculating <code>t</code>. This is useful for accurately determining the "next" or "previous" gradient value.</p>
<h3 id="utilget_multi_gradcs-interp-loopnamegrad"><code>util.get_multi_grad(cs, interp, loopname='grad')</code></h3>
<p>Like <code>multi_gbc</code>, but for <code>get_grad</code>.</p>
<h3 id="utilftoan-digits2"><code>util.ftoa(n, digits=2)</code></h3>
<p>Formats <code>n</code> as a string with at most <code>digits</code> decimal digits, <em>without</em> any unwanted trailing zeroes/decimal point.
Why does no programming language ever seem to make this easy?</p>
<h3 id="utilfbfmodeline-start_offset0-end_offset0-frames1-loopnamefbf"><code>util.fbf(mode='line', start_offset=0, end_offset=0, frames=1, loopname='fbf')</code></h3>
<p>Similar to <code>retime</code> in usage, but splits a line into one copy timed to each frame of video.
If <code>frames</code> is set to a larger integer, then the line will be split into sections that each last that many frames.
Much like <code>util.make_grad</code>, this function uses regular user-accessible template loops; the loop variable can be customized using the <code>loopname</code> argument.</p>
<h3 id="utilrandsign"><code>util.rand.sign()</code></h3>
<p>Either -1 or 1, randomly.</p>
<h3 id="utilranditemlist"><code>util.rand.item(list)</code></h3>
<p>A random element in the provided list.
Assumes a standard 1-indexed Lua list with no gaps, like any other "list"-y function.</p>
<p>If passed a string, returns a random UTF-8 code point from its text.</p>
<h3 id="utilrandboolp05"><code>util.rand.bool(p=0.5)</code></h3>
<p>A random Boolean value, where <code>p</code> is the probability that the value is <code>true</code>.</p>
<h3 id="utilrandchoicea-b-p"><code>util.rand.choice(a, b, p)</code></h3>
<p><code>if util.rand.bool(p) then a else b</code></p>
<h3 id="utilmathroundn"><code>util.math.round(n)</code></h3>
<p>Rounds <code>n</code> to the nearest integer.</p>







  
  



  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.top", "navigation.expand", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy", "content.code.select"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>